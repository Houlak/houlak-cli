# Houlak CLI - Context Document

## Prop√≥sito del Proyecto

`houlak-cli` es una herramienta de l√≠nea de comandos (CLI) para uso interno de la empresa Houlak. Su prop√≥sito es facilitar a los desarrolladores la realizaci√≥n de tareas comunes relacionadas con AWS, abstrayendo la complejidad de estas operaciones y permitiendo que los desarrolladores se concentren en su trabajo sin necesidad de entender los detalles internos de AWS.

## Caracter√≠sticas Principales

### Instalaci√≥n
- La herramienta est√° disponible desde un repositorio privado de GitHub
- Se instala f√°cilmente usando pip: `pip install git+https://github.com/Houlak/houlak-cli.git`
- Soporta instalaci√≥n en modo desarrollo para pruebas locales

### Arquitectura
- Desarrollada en Python 3.8+
- Utiliza Typer como framework de CLI
- Utiliza Rich para mejorar la presentaci√≥n en consola
- Se apoya en AWS CLI y AWS Session Manager Plugin
- Trabaja con perfiles de AWS configurados localmente en `~/.aws/config`

## Herramientas Actuales

### Conexi√≥n a Bases de Datos
La herramienta actual permite conectarse a bases de datos RDS previamente configuradas por un administrador en AWS Systems Manager Parameter Store. Las caracter√≠sticas incluyen:

- **Bastion Host**: Utiliza una instancia EC2 como bastion host para establecer conexiones seguras
- **Session Manager**: Usa AWS Session Manager en lugar de SSH tradicional, eliminando la necesidad de claves SSH y puertos expuestos
- **T√∫nel Persistente**: Cuando se ejecuta el comando `db-connect`, la consola queda ocupada manteniendo activo el t√∫nel de conexi√≥n
- **Transparencia**: Al conectarse desde herramientas de bases de datos (DBeaver, TablePlus, etc.), no es necesario especificar el bastion host; la herramienta maneja esto autom√°ticamente
- **Configuraci√≥n Centralizada**: Los administradores configuran las bases de datos en Parameter Store, y los desarrolladores las usan sin preocuparse por los detalles de conexi√≥n

### Comandos Disponibles

**Comandos de Configuraci√≥n** (trabajan con perfiles de AWS):
- `config`: Ejecuta el wizard de configuraci√≥n para establecer el perfil de AWS
- `config-list`: Lista todos los perfiles de AWS configurados localmente
- `config-current`: Muestra la configuraci√≥n actual de houlak-cli

**Comandos de Base de Datos**:
- `db-connect`: Conecta a una base de datos a trav√©s del Session Manager
- `db-list`: Lista las bases de datos disponibles

**Comandos Administrativos**:
- `admin-db-add`: Agrega una configuraci√≥n de base de datos al Parameter Store (solo para administradores)

## Herramientas Futuras

Esta es una plataforma extensible dise√±ada para crecer. En el futuro se agregar√°n m√°s herramientas y comandos para facilitar otras operaciones comunes de AWS y flujos de trabajo de desarrollo.

## Gu√≠a de Estilo Visual

### Principios de Dise√±o de Mensajes
La herramienta sigue una gu√≠a de estilo visual consistente basada en `paigo-cli`:

1. **Colores**:
   - Cyan: Para nombres de comandos, t√≠tulos y elementos destacados
   - Green: Para valores, confirmaciones y estados exitosos
   - Yellow: Para advertencias y tips
   - Red: Para errores
   - Magenta: Para informaci√≥n secundaria
   - Dim/Gray: Para informaci√≥n menos importante

2. **Indicadores Visuales**:
   - ‚úì (checkmark): Operaciones exitosas
   - ‚úó (cross): Operaciones fallidas
   - ‚ö† (warning): Advertencias
   - üîç (magnifying glass): B√∫squedas/listados
   - üí° (light bulb): Tips y sugerencias
   - ‚ûï (plus): Acciones de agregar
   - üöÄ (rocket): Bienvenida/inicio

3. **Formato de Mensajes**:
   - Usar paneles de Rich para mensajes de bienvenida importantes
   - Usar tablas de Rich para listar informaci√≥n estructurada
   - Incluir separadores visuales claros entre secciones
   - Proporcionar feedback claro sobre el estado de las operaciones
   - Siempre incluir tips √∫tiles despu√©s de listar informaci√≥n

4. **Consistencia**:
   - Todos los mensajes deben seguir esta gu√≠a de estilo
   - Los nuevos comandos deben mantener el mismo nivel de calidad visual
   - Los errores deben ser descriptivos y sugerir soluciones

## Stack Tecnol√≥gico

- **Python**: 3.8+
- **Typer**: Framework de CLI con soporte para autocompletado
- **Rich**: Librer√≠a para output enriquecido en terminal
- **Boto3**: SDK de AWS para Python
- **PyYAML**: Manejo de archivos YAML

## Desarrollo Local

Para desarrollar y probar cambios localmente sin necesidad de instalar desde el repositorio:

```bash
# Crear entorno virtual
python3 -m venv venv
source venv/bin/activate  # En Windows: venv\Scripts\activate

# Instalar en modo desarrollo
pip install -e .

# La herramienta estar√° disponible inmediatamente con cualquier cambio
houlak-cli --help
```

## Convenciones del Proyecto

- Los comandos usan guiones para separar palabras (e.g., `db-connect`, `config-list`)
- Los comandos relacionados usan prefijos comunes (e.g., `db-*`, `config-*`, `admin-*`)
- Las opciones cortas usan gui√≥n simple (e.g., `-e`, `-p`, `-v`)
- Las opciones largas usan doble gui√≥n (e.g., `--env`, `--port`, `--version`)
- Los comandos administrativos usan el prefijo `admin-` para claridad

## Seguridad

- No se requieren claves SSH
- Autenticaci√≥n basada en IAM
- Auditor√≠a completa a trav√©s de CloudTrail
- Las credenciales se manejan a trav√©s de AWS SSO
- No se exponen puertos SSH
